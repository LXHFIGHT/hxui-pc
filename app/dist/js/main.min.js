"use strict";var main=angular.module("mainApp",["ui.router","MainController","MainFilter","MainService","MainValue","Config"]);main.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,t,o){t.when("","/home"),t.otherwise("/enter"),e.state("home",{url:"/home",views:{"":{templateUrl:"src/views/hxui/home/home.html",controller:"HomeCtrl"}}}).state("plugins",{url:"/plugins",views:{"":{templateUrl:"src/views/hxui/plugins/plugins.html",controller:"PluginsCtrl"}}}).state("demos",{url:"/demos",views:{"":{templateUrl:"src/views/hxui/demos/demos.html",controller:"DemosCtrl"}}}).state("login",{url:"/login/:state",views:{"":{templateUrl:"src/views/login/login.html",controller:"LoginCtrl"}}}).state("enter",{url:"/enter",views:{"":{templateUrl:"src/views/layout/enter/enter.html",controller:"IndexCtrl"},"sidebar@enter":{templateUrl:"src/views/layout/sidebar/sidebar.html",controller:"SidebarCtrl"},"main@enter":{}}}).state("enter.list-head",{url:"/listHead",views:{"main@enter":{templateUrl:"src/views/list/list-head/index.html",controller:"ListHeadCtrl"}}}).state("enter.config",{url:"/config",views:{"main@enter":{templateUrl:"src/views/config/config.html",controller:"ConfigCtrl"}}}),o.defaults.transformRequest=function(e){var t=[];for(var o in e)t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},o.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]),main.run(["$rootScope","$location","$log","$state","globalValue","HttpHelper","config","StorageHelper","authority","sidebarMenus",function(e,t,o,n,r,a,i,l,u,s){e.stateStack=[],e.stateParamsStack=[],e.authority=u,e.config=i,e.pagesize=[{value:10,text:"每页10条记录"},{value:20,text:"每页20条记录"},{value:30,text:"每页30条记录"},{value:40,text:"每页40条记录"},{value:50,text:"每页50条记录"}],e.back=function(){0===e.stateStack.length?popTipWarningQuick("已经无法后退了，请勿频繁刷新页面"):(e.stateStack.pop(),e.stateParamsStack.pop(),n.go(e.stateStack.pop(),e.stateParamsStack.pop()))},e.toggleAdvanceSearch=function(){var t=$(".hxui-advance-search");e.showSidebar=!1,t.hasClass("show")?t.removeClass("show"):t.addClass("show")},e.toState=function(e){n.go(e)},e.isDeveloping=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"该功能正在开发中...";popTipWarningQuick(e)},e.$on("$stateChangeStart",function(e,t,r,a,u){i.statusLog&&o.log("from state: "+a.name+"\tto state: "+t.name),"login"!==t.name&&i.needLogin&&(l.getValue("username")||("enter"!==t.name&&popTipWarningQuick("请先登录"),e.preventDefault(),n.go("login",{state:t.name})))});var c=function(e){console.log("The name is : ",e);var t=!0,o=!1,n=void 0;try{for(var r,a=s[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;if(i.children&&"[object Array]"===Object.prototype.toString.call(i.children)){var l=!0,u=!1,c=void 0;try{for(var p,d=i.children[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g=p.value;console.log("MENUS: ",g.state),e!==g.state?g.selected=!1:(g.selected=!0,i.selected=!0)}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}}else i.state===e&&(i.selected=!0)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}};e.$on("$stateChangeSuccess",function(t,o,n,r,a){var i=o.name;e.stateStack.push(i),e.stateParamsStack.push(n),c(i)})}]);var _module=angular.module("Config",[]);_module.value("config",{isDebug:!0,serverPrefix:"http://localhost:3000",logo:{url:"./dist/img/logo/logo.png",show:!0},projectVersion:"V 0.0.1 DEV",projectName:"HXUI Admin",subProjectName:"",subject:"",needLogin:!1,loginTitle:"登录管理后台",loginBg:"./dist/img/bg/bg-login.jpg",copyright:"Candy UI"}),_module.factory("globalValue",[function(){return{errorMsg:"服务器请求失败，暂无响应",isLogOpen:!0,statusLog:!1,requestJsonLog:!0,responseJsonLog:!0,kindLists:null}}]);var controller=angular.module("MainController",["HXUIController","LayoutController","ListController","CommonController","ConfigController"]),HXUIController=angular.module("HXUIController",[]),layout=angular.module("LayoutController",[]),list=angular.module("ListController",[]),common=angular.module("CommonController",[]),config=angular.module("ConfigController",[]),service=angular.module("MainService",["HelperService","BusinessService"]),helperService=angular.module("HelperService",[]),BusinessService=angular.module("BusinessService",[]),mainValueModule=angular.module("MainValue",["menus","factories"]),menus=angular.module("menus",[]),factories=angular.module("factories",[]),service=angular.module("HelperService");service.factory("AuthHttpHelper",["$http","$state","$log","config","StorageHelper","globalValue",function(e,t,o,n,r,a){var i=n.serverPrefix,l=function(e,o){401===o?(t.go("login",{state:t.$current.name}),popTipWarningQuick("用户授权失效")):popTipErrorQuick(a.errorMsg)};return{doDelete:function(t,o){var n=r.getValue("token");return e({method:"DELETE",url:i+t,headers:{Authorization:"Bearer "+n}}).error(function(e,t,o,n){l(0,t)})},doGet:function(t,o){var n=r.getValue("token");return e({method:"GET",url:i+t,params:o,timeout:3e4,headers:{Authorization:"Bearer "+n}}).error(function(e,t,o,n){l(0,t)})},doPost:function(t,o,n){var a=r.getValue("token"),u={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a};return void 0!==n?u=n:null===n&&(u={Authorization:"Bearer "+a}),e({method:"POST",url:i+t,data:o,timeout:6e4,headers:u}).error(function(e,t,o,n){l(0,t)})},doPut:function(t,o){var n=r.getValue("token");return e({method:"PUT",url:i+t,data:o,timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+n}}).error(function(e,t,o,n){l(0,t)})},uploadFile:function(t,o){var r=new FormData,a=t.query[0].files;popTipWarningQuick("文件正在上传中，请稍等"),null!==a&&(r.append("image",a[0]),e({method:"POST",url:n.serverPrefix+"/common/uploadCloud/"+t.type,data:r,headers:{"Accept-Language":"en, zh","Content-Type":void 0,Authorization:"Bearer "+token},transformRequest:angular.identity}).success(function(e){popTipInfoQuick("图片上传成功"),o(null,e.data)}).error(function(e){popTipErrorQuick("传输出错"),console.log(e),o(e,null)}))}}}]);var service=angular.module("HelperService");service.factory("HttpHelper",["$http","$log","config","globalValue","StorageHelper",function(e,t,o,n,r){var a=o.serverPrefix,i=r.getValue("token");return{open:function(e){window.open(a+e,"_blank")},doDelete:function(t,o){var n=r.getValue("token");return e({method:"DELETE",url:a+t+"?token="+n})},doGet:function(t,o){return o.token=r.getValue("token"),console.log("请求信息为： "+JSON.stringify(o)),e({method:"GET",url:a+t,params:o,timeout:3e4}).error(function(e,t,o,n){console.warn("服务端错误："),console.warn(e),console.warn(t),console.warn(o),console.warn(n),popTipErrorQuick("服务端错误信息："+e)})},doPost:function(t,o,i){var l={"Content-Type":"application/x-www-form-urlencoded"};return void 0!==i?l=i:null===i&&(l={}),e({method:"POST",url:a+t+"?token="+r.getValue("token"),data:o,timeout:6e4,headers:l}).error(function(e,t,o,r){popTipErrorQuick(n.errorMsg)})},doPut:function(t,o){return console.log("doPut: "+JSON.stringify(o)),e({method:"PUT",url:a+t+"?token="+r.getValue("token"),data:o,timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).error(function(e,t,o,r){popTipErrorQuick(n.errorMsg)})},doPatch:function(t,o){return console.log("doPatch: "+JSON.stringify(o)),e({method:"PATCH",url:a+t+"?token="+r.getValue("token"),data:o,timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).error(function(e,t,o,r){popTipErrorQuick(n.errorMsg)})},uploadFile:function(t,n){var a=new FormData,i=t.query[0].files,l=r.getValue("token");if(0===i.length)return void popTipWarningQuick("请选择图片");popTipWarningQuick("文件正在上传中，请稍等"),null!==i&&(a.append("image",i[0]),a.append("token",l),e({method:"POST",url:o.serverPrefix+"storage/upload",data:a,headers:{"Accept-Language":"en, zh","Content-Type":void 0},transformRequest:angular.identity}).success(function(e){popTipInfoQuick("图片上传成功"),n(null,e.data)}).error(function(e){popTipErrorQuick("传输出错"),console.log(e),n(e,null)}))},uploadFiles:function(t,n){var r=new FormData,a=t.query[0].files;if(t.paramName=t.paramName||"file",0===a.length)return void popTipWarningQuick("请选择图片");if(popTipWarningQuick("文件正在上传中，请稍等"),null!==a){for(var l=0;l<a.length;l++)r.append(t.paramName+"-"+l,a[l]);r.append("token",i),e({method:"POST",url:o.serverPrefix+"/record/upload.json",data:r,headers:{"Accept-Language":"en, zh","Content-Type":void 0},transformRequest:angular.identity}).success(function(e){popTipInfoQuick("图片上传成功"),n(null,e.data)}).error(function(e){popTipErrorQuick("传输出错"),console.log(e),n(e,null)})}},responseHandler:function(e,t,o){e.code>=200&&e.code<300?"function"==typeof t&&t(e.data):("function"==typeof o&&o(e),void 0===o&&popTipWarning(e.message))}}}]);var _module=angular.module("HelperService");_module.factory("LocalStorageHelper",[function(){var e=window.localStorage;return{setValue:function(t,o){return e.setItem(t,o),!0},getValue:function(t){return e.getItem(t)},popValue:function(t){var o=e.getItem(t);return e.removeItem(t),o},saveObject:function(t,o){var n=JSON.stringify(o);e.setItem(t,n)},getObject:function(e){var t=window.sessionStorage.getItem(e);return JSON.parse(t)},getObjectItem:function(t){if("string"==typeof t){var o=t.split(".");if(2===o.length){return JSON.parse(e.getItem(o[0]))[o[1]]}return"key值形式不符合 objName.paramName"}return"传入参数key不是字符串"},clearValue:function(t){e.removeItem(t)}}}]);var service=angular.module("HelperService");service.factory("BaiduMapHelper",[function(){return{initSimpleMap:function(e,t,o){if(!BMap)return console.warn("由于使用到百度地图工具方法，请引入百度地图javascript api文件： http://api.map.baidu.com/api?v=2.0&ak={百度地图开放平台AK}"),null;var n=e.id,r=e.lat,a=e.lng;if(r&&a){var i=new BMap.Map(n),l=new BMap.Point(parseFloat(a),parseFloat(r));i.centerAndZoom(l,14),i.enableScrollWheelZoom();var u=new BMap.Marker(l);i.addOverlay(u),i.addEventListener("click",function(e){i.clearOverlays();var o=new BMap.Marker(e.point);i.addOverlay(o),o.setAnimation(BMAP_ANIMATION_BOUNCE),i.panTo(e.point),"function"==typeof t&&t(e.point)}),"function"==typeof o&&o(i)}else{popTipInfoQuick("正在定位当前位置...");(new BMap.Geolocation).getCurrentPosition(function(e){if(this.getStatus()===BMAP_STATUS_SUCCESS){console.log("初始化坐标为： "+a+", "+r);var i=new BMap.Map(n);i.centerAndZoom(e.point,14);var l=new BMap.Marker(e.point);i.addOverlay(l),i.panTo(e.point),i.enableScrollWheelZoom(!0),i.addEventListener("click",function(e){i.clearOverlays();var o=new BMap.Marker(e.point);i.addOverlay(o),o.setAnimation(BMAP_ANIMATION_BOUNCE),i.panTo(e.point),"function"==typeof t&&t(e.point)}),"function"==typeof o&&o(i)}else popTipWarningQuick("获取位置失败："+this.getStatus())},{enableHighAccuracy:!0})}}}}]);var ObjectHelper=angular.module("HelperService");ObjectHelper.factory("ObjectHelper",[function(){var e=function(e){var t=new Date(e),o=t.getMonth()+1,n=t.getDate();return t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(n<10?"0"+n:n)},t=function(e){var t=new Date(e),o=t.getFullYear(),n=t.getMonth()+1,r=t.getDate()>=10?t.getDate():"0"+t.getDate(),a=t.getHours()>=10?t.getHours():"0"+t.getHours(),i=t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes(),l=t.getSeconds()>=10?t.getSeconds():"0"+t.getSeconds();return o+"-"+(n>=10?n:"0"+n)+"-"+r+" "+a+":"+i+":"+l},o=function(e){return"string"==typeof e&&-1!==e.indexOf("市")?e.substr(0,e.indexOf("市"))+"市":null};return{generateDayArray:function(t,o){for(var n=[],r=t;;){if(r>o){console.log(r+"   "+o);break}var a=new Date(r).getDay(),i={date:r,day:a};n.push(i),r=e(new Date(r).getTime()+864e5)}return n},getDate:e,getDatetime:t,getCity:o,compareDays:function(e,t){var o=Math.abs(new Date(e).getTime()-new Date(t).getTime());return o%864e5==0?o/864e5:Math.floor(o/864e5)},maxDate:function(e){var t="2000-01-01";return e.forEach(function(e){e>t&&(t=e)}),t},validCellphone:function(e){var t=/^1[3|5|7|8]{1}[0-9]{9}/;return!!e&&t.test(e)},clearParamInArray:function(e,t){if("string"!=typeof t)return!1;var o=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done);o=!0){delete a.value[t]}}catch(e){n=!0,r=e}finally{try{!o&&i.return&&i.return()}finally{if(n)throw r}}return!0},doSelect:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selected";if("[object Array]"===Object.prototype.toString.call(e)){var n=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value;if(u.children&&"[object Array]"===Object.prototype.toString.call(u.children)){var s=!0,c=!1,p=void 0;try{for(var d,g=u.children[Symbol.iterator]();!(s=(d=g.next()).done);s=!0){var f=d.value;-1===t.indexOf(f.name)?f[o]=!1:(f[o]=!0,u.selected=!0)}}catch(e){c=!0,p=e}finally{try{!s&&g.return&&g.return()}finally{if(c)throw p}}}}}catch(e){r=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw a}}}else console.log("doSelect方法第一个参数类型需要为数组对象")},hasNone:function(e){if("[object Object]"===Object.prototype.toString.call(e)){var t=!1;for(var o in e)e[o]||(t=!0);return t}return console.log("调用ObjectHelper.hasNone要求传入的参数为 JS对象"),!0},isEmail:function(e){return/\w@\w*\.\w/.test(e)},getRandomString:function(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="",n=0;n<e;n++)o+=t.charAt(Math.floor(parseInt(36*Math.random())));return o}}}]);var _module=angular.module("HelperService");_module.factory("StorageHelper",[function(){return{KEY_APPOINTMENT_SEARCH_INFO:"KEY_APPOINTMENT_SEARCH_INFO",setValue:function(e,t){return window.sessionStorage.setItem(e,t),!0},getValue:function(e){return window.sessionStorage.getItem(e)},popValue:function(e){var t=window.sessionStorage.getItem(e);return window.sessionStorage.removeItem(e),t},saveObject:function(e,t){var o=JSON.stringify(t);window.sessionStorage.setItem(e,o)},getObject:function(e){var t=window.sessionStorage.getItem(e);return JSON.parse(t)},clearValue:function(e){window.sessionStorage.removeItem(e)}}}]);var _module=angular.module("MainFilter",[]),factoriesModule=angular.module("factories");factoriesModule.factory("authority",["$rootScope","StorageHelper",function(e,t){return{ROLE_COMMON_USER:0,ROLE_SUPER_ADMIN:100,isRole:function(e){return"*"===e||e===parseInt(t.getValue("role"))},withRole:function(e){if("*"===e)return!0;var o=e.split("|"),n=parseInt(t.getValue("role")),r=!0,a=!1,i=void 0;try{for(var l,u=o[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value;if(n===parseInt(s))return!0}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return!1}}}]);var menus=angular.module("menus");menus.value("sidebarMenus",[{name:"列表页面",state:"enter.list",icon:"list",role:"*",selected:!0,children:[{name:"带header列表",state:"enter.list-head",icon:"th",role:"*",selected:!1},{name:"带footer列表",state:"enter.list-footer",icon:"calendar",role:"*",selected:!1},{name:"完整布局列表",state:"enter.list-both",icon:"check-square-o",role:"*",selected:!1}]},{name:"表单组件",state:"enter.config",icon:"cog",role:"*",selected:!1},{name:"一级菜单",state:"enter.system",icon:"cogs",role:"*",selected:!1,children:[{name:"二级菜单5",state:"",icon:"user",role:"*",selected:!1},{name:"二级菜单6",state:"",icon:"users",role:"*",selected:!1}]}]);var DemosCtrl=angular.module("HXUIController");DemosCtrl.controller("DemosCtrl",["$scope",function(e){e.location="",e.actionSheetText="请选择收货地区",e.event={doPopInfo:function(e){switch(e){case 0:HXUI.popTipNormal("调用 HXUI.popTipNormal 弹出常规提示框");break;case 1:HXUI.popTipInfo("调用 HXUI.popTipInfo 弹出成功提示框");break;case 2:HXUI.popTipWarning("调用 HXUI.popTipWarning 弹出警告提示框");break;case 3:HXUI.popTipError("调用 HXUI.popTipError 弹出错误提示框")}},doShowLoading:function(e,t){HXUI.showLoading({title:e,during:t})},doHideLoading:function(){HXUI.hideLoading()},doShowTip:function(e){HXUI.toast(e)},doMarkInput:function(e){HXUI.markInput({type:e})},doConfirm:function(){HXUI.confirm({title:"HXUI确认框",content:"请问你觉得这个框怎么样呢？",confirmText:"挺不错的",cancelText:"不喜欢",onConfirm:function(){HXUI.popTipInfoQuick("很高兴得到你的认可")},onCancel:function(){HXUI.popTipInfoQuick("好的我们继续改进")}})},doImagePreview:function(){var e=["http://lxh-static.oss-cn-shenzhen.aliyuncs.com/img/example-1.jpeg","http://lxh-static.oss-cn-shenzhen.aliyuncs.com/img/example-2.png","http://lxh-static.oss-cn-shenzhen.aliyuncs.com/img/example-3.jpeg","http://lxh-static.oss-cn-shenzhen.aliyuncs.com/img/example-4.jpeg"];HXUI.imagePreviewer({urls:e,currentUrl:"http://lxh-static.oss-cn-shenzhen.aliyuncs.com/img/example-3.jpeg"})},doChooseAddress:function(){HXUI.addressSelector({choose:function(t){var o=t.lng,n=t.lat,r=t.address,a=t.city,i=t.title;e.location=a+" "+i+" "+r+", （经度："+o+", 纬度："+n+"）",e.$apply()}})},showActionSheet:function(){HXUI.actionSheet({items:["中国大陆","中国台湾","中国香港","中国澳门"],onSelect:function(t){HXUI.popTipInfoQuick("已选择"+t.value),e.actionSheetText=t.value,e.$apply()}})}},e._init={initRoute:function(){HXUI.showRouteMap({query:"map",startLabel:"起始点",endLabel:"结束点",startTime:"05.10 12:30",endTime:"05.10 13:00",isComplete:!0,routes:[{lng:113.23,lat:23.33},{lng:113.35,lat:23.35},{lng:113.28,lat:23.4}]})}},e.init=function(){e._init.initRoute()}()}]);var HomeCtrl=angular.module("HXUIController");HomeCtrl.controller("HomeCtrl",["$scope",function(e){e._init={wave:function(){function e(){o.clearRect(0,0,t.width,t.height),a++;for(var l=i.length-1;l>=0;l--){o.fillStyle=i[l];var u=(a+50*l)*Math.PI/180,s=Math.sin(u)*n,c=Math.cos(u)*n;o.beginPath(),o.moveTo(0,r+s),o.bezierCurveTo(t.width/2,r+s-n,t.width/2,r+c-n,t.width,r+c),o.lineTo(t.width,t.height),o.lineTo(0,t.height),o.lineTo(0,r+s),o.closePath(),o.fill()}requestAnimFrame(e)}var t=document.getElementById("canvas"),o=t.getContext("2d");t.width=t.parentNode.offsetWidth,t.height=document.body.clientHeight,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var n=t.height/20,r=t.height/1.1,a=0,i=["rgba(0,222,255, 0.2)","rgba(157,192,249, 0.2)","rgba(0,168,255, 0.2)"];e()}},e.init=function(){e._init.wave()}()}]);var EnterCtrl=angular.module("LayoutController");EnterCtrl.controller("EnterCtrl",["$scope","$rootScope",function(e,t){e.toggleSidebar=function(){t.showSidebar=!t.showSidebar}}]);var PluginsCtrl=angular.module("HXUIController");PluginsCtrl.controller("PluginsCtrl",["$scope",function(e){e._init={}}]);var IndexCtrl=angular.module("LayoutController");IndexCtrl.controller("IndexCtrl",["$scope","$rootScope",function(e,t){e.toggleSidebar=function(){t.showSidebar=!t.showSidebar},e._init=function(){window.addEventListener("click",function(e){for(var o=$(e.target),n=o.parents(),r=!1,a=0;a<n.length;a++){var i=n[a].getAttribute("class")||"";if(-1!==i.indexOf("hx-sidebar")||-1!==i.indexOf("btn-show-sidebar")){r=!0;break}}var l=o.attr("class")||"";-1===l.indexOf("hx-sidebar")&&-1===l.indexOf("btn-show-sidebar")||(r=!0),r||(t.showSidebar=!1,t.$apply())})}()}]);var sidebarModule=angular.module("LayoutController");sidebarModule.controller("SidebarCtrl",["$scope","$state","sidebarMenus","config","StorageHelper",function(e,t,o,n,r){e.config=n,e.doLogout=function(){r.clearValue("token"),r.clearValue("role"),r.clearValue("station_id"),t.go("login",{state:""})},e.menus=o,e.selectedMenu=o[0],e.doClick=function(o,n){if(n.children)return void(n.selected=!n.selected);n.selected||(e.selectedMenu&&!e.selectedMenu.children&&(e.selectedMenu.selected=!1),n.selected=!n.selected,e.selectedMenu=n,n.state&&t.go(n.state))}}]);var _module=angular.module("ListController");_module.controller("ListCtrl",["$scope","HttpHelper",function(e,t){e.searchInfo={page:1,pagesize:20,maxsize:0},e.list=[],e.requestList=function(){t.doGet("/wallpaper/list",e.searchInfo).success(function(e){t.responseHandler(e,function(e){},function(e){})})},e.requestListByPage=function(t){e.searchInfo.page=t,e.requestList()},e.toPageOfList=function(){e.searchInfo.maxsize>=e.searchInfo.jumpPage&&e.searchInfo.jumpPage>0?(e.searchInfo.page=parseInt(e.searchInfo.jumpPage),e.requestList()):popTipWarningQuick("跳转页面超过范围")}}]);var _module=angular.module("ListController");_module.controller("ListHeadCtrl",["$scope","HttpHelper",function(e,t){e.searchInfo={page:1,pagesize:20,maxsize:0},e.list=[],e.requestList=function(){t.doGet("/wallpaper/list",e.searchInfo).success(function(e){t.responseHandler(e,function(e){},function(e){})})},e.requestListByPage=function(t){e.searchInfo.page=t,e.requestList()},e.toPageOfList=function(){e.searchInfo.maxsize>=e.searchInfo.jumpPage&&e.searchInfo.jumpPage>0?(e.searchInfo.page=parseInt(e.searchInfo.jumpPage),e.requestList()):popTipWarningQuick("跳转页面超过范围")}}]);var ConfigCtrl=angular.module("ConfigController");ConfigCtrl.controller("ConfigCtrl",["$scope",function(e){}]);var LoginCtrl=angular.module("CommonController");LoginCtrl.controller("LoginCtrl",["$scope","$state","$stateParams","HttpHelper","StorageHelper","config",function(e,t,o,n,r,a){e.isLoginMode=!0,e.logoUrl=a.logo.url,e.state=o.state||"enter",e.toggleMode=function(t){e.isLoginMode=t},e.userInfo={username:"",password:""},e.keyForLogin=function(t){13===t.keyCode&&e.doLogin()},e.doLogin=function(){e.userInfo.username&&e.userInfo.password?a.isDebug&&"admin"===e.userInfo.username&&"admin123"===e.userInfo.password&&(popTipInfoQuick("登录成功"),r.setValue("username","superadmin"),t.go(e.state)):popTipWarningQuick("请完善登录信息")},e.keyForRegister=function(t){if(13===t.keyCode)e.doRegister();else{var o=e.register,n=o.password;o.passwordConfirm!==n?$(".input-password-confirm").addClass("error"):$(".input-password-confirm").removeClass("error")}},e.doRegister=function(){var o=e.register,a=o.username,i=o.password,l=o.passwordConfirm,u=o.email;return ObjectHelper.hasNone(e.register)?void popTipWarningQuick("请完善所有信息"):i!==l?void popTipWarningQuick("账号密码和密码确认不匹配"):void n.doPost("user/signup",{username:a,password:i,email:u}).success(function(o){if(200===o.code){popTipInfoQuick("注册车检所成功，自动登录");var n=o.data,a=n.token,i=n.role;r.setValue("token",a),r.setValue("role",i),t.go("enter.inspection"),e._initProjectName(i)}else popTipWarningQuick(o.message)})}}]);